{"version":3,"sources":["../../../../src/js/components/Tabs/index.js"],"names":["last","arr","pre","base","length","indexOf","replace","split","Tabs","state","showingPlus","handleBarClick","e","stopPropagation","props","createTab","handleTabClick","index","preventDefault","setActiveTab","handleRemoveClick","instance","removeTab","id","removePlus","setState","showPlus","style","active","tabs","context","instances","map","title","summary","promptPrefix","maximise","maxWidth","displayName","propTypes","object","string","func","defaultProps","contextTypes","array","bool"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tab, TabBar, TabBarEmpty, TabClose, TabPlus } from './styled-elements';\n\nfunction last(arr, pre = '') {\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\n  if (base.indexOf(`${pre}> `) !== 0) {\n    base = 'bash';\n  }\n  return base.replace(`${pre}> `, '').split(' ')[0];\n}\n\nclass Tabs extends Component {\n  static displayName = 'Tabs';\n\n  static propTypes = {\n    style: PropTypes.object, // eslint-disable-line\n    active: PropTypes.string,\n    setActiveTab: PropTypes.func,\n    removeTab: PropTypes.func,\n    createTab: PropTypes.func,\n  };\n\n  static defaultProps = {\n    style: {},\n  };\n\n  static contextTypes = {\n    instances: PropTypes.array,\n    maximise: PropTypes.bool,\n  };\n\n  state = {\n    showingPlus: false,\n  };\n\n  handleBarClick = (e) => {\n    e.stopPropagation();\n    this.props.createTab();\n  };\n\n  // handle clicking a tab\n  handleTabClick = (e, index) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.setActiveTab(index);\n  };\n\n  // handle remove clicked\n  handleRemoveClick = (e, index, instance) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.removeTab(index, instance.props.id);\n    return false;\n  };\n\n  removePlus = () => {\n    if (this.state.showingPlus) {\n      this.setState({ showingPlus: false });\n    }\n  }\n\n  showPlus = () => {\n    if (!this.state.showingPlus) {\n      this.setState({ showingPlus: true });\n    }\n  }\n\n  render() {\n    const { showingPlus } = this.state;\n    const { style, active } = this.props;\n    const tabs = this.context.instances.map(({ index, instance }) => {\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n      return (\n        <Tab\n          key={index}\n          active={active === index}\n          onClick={e => this.handleTabClick(e, index)}\n          onFocus={e => this.handleTabClick(e, index)}\n          title={title}\n          tabIndex={0}\n        >\n          {this.context.instances.length > 1 && (\n            <TabClose\n              title=\"Close Tab\"\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\n            >\n              x\n            </TabClose>\n          )}\n          {title}\n        </Tab>\n      );\n    });\n\n    return (\n      <TabBar\n        style={{\n          ...style,\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\n        }}\n      >\n        {tabs}\n        <TabBarEmpty\n          onMouseEnter={this.showPlus}\n          onMouseLeave={this.removePlus}\n        >\n          <TabPlus\n            visible={showingPlus}\n            onClick={this.handleBarClick}\n          >+\n          </TabPlus>\n        </TabBarEmpty>\n      </TabBar>\n    );\n  }\n}\n\nexport default Tabs;\n"]}